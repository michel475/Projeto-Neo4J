//usuario participando comunidade
match (u:Usuario)
where u.id >= 8 and u.id <= 35
with u, [ToInteger(rand()*6), ToInteger(rand()*6), ToInteger(rand()*6)] as comunidades
unwind comunidades as com
match (c:Comunidade {id: com})
merge (u)-[p:PARTICIPA]->(c)


//usuario seguindo usuario
match (u:Usuario)
where u.id >= 8 and u.id <= 35
with u, [ToInteger(rand()*35), ToInteger(rand()*35), ToInteger(rand()*35), ToInteger(rand()*35), ToInteger(rand()*35), ToInteger(rand()*35)] as segundo_user
unwind segundo_user as seg
match (u2:Usuario {id: seg})
where u <> u2
merge (u)-[p:SEGUE]-(u2)


//usuario curte post

match (u:Usuario)
where u.id >= 8 and u.id <= 35
with u, [ToInteger(rand()*85), ToInteger(rand()*85)] as postagens
unwind postagens as posts
match (p:Post {id: posts})
merge (u)-[c:CURTE]-(p)


//cada usuario realizando um comentario
match (u:Usuario)
with collect(u) as todosUsuarios
match (p:Post)
with todosUsuarios, collect(p) as todosPosts
match (c:Comentario)
where not (c)-[:COMENTOU]->()
call {
  with c, todosUsuarios, todosPosts
  with c, apoc.coll.randomItem(todosUsuarios) as usuarioAleatorio, todosPosts
  with c, usuarioAleatorio, apoc.coll.randomItem(todosPosts) as postAleatorio
  merge (usuarioAleatorio)-[:COMENTOU]->(c)
  merge (c)-[:ESTA_EM]->(postAleatorio)
} in transactions of 10 rows
